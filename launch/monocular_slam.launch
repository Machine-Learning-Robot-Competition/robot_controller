<launch>
  <!-- Basic parameters -->
  <param name="use_sim_time" type="bool" value="True"/>
  <arg name="rtabmap_args" default="--delete_db_on_start"/>
  <arg name="localization" default="false"/>

  <!-- SLAM Node -->
  <node name="rtabmap" pkg="rtabmap_slam" type="rtabmap" output="screen" args="$(arg rtabmap_args)">
    <param name="frame_id" type="string" value="base_footprint"/>
    <param name="subscribe_depth" type="bool" value="false"/>
    <param name="subscribe_scan" type="bool" value="false"/>
    <param name="odom_frame_id" type="string" value="odom"/>
    
    <!-- Remap to the correct camera topics -->
    <remap from="rgb/image" to="/B1/rrbot/camera1/image_raw"/>
    <remap from="rgb/camera_info" to="/B1/rrbot/camera1/camera_info"/>

    <param name="rgb/image_transport" type="string" value="raw"/>
  </node>

  <!-- Visualization Node -->
  <node pkg="rtabmap_viz" type="rtabmap_viz" name="rtabmap_viz" output="screen">
    <param name="subscribe_depth" type="bool" value="false"/>
    <param name="frame_id" type="string" value="base_footprint"/>

    <!-- Remap to the correct camera topics for visualization -->
    <remap from="rgb/image" to="/B1/rrbot/camera1/image_raw"/>
    <remap from="rgb/camera_info" to="/B1/rrbot/camera1/camera_info"/>

    <param name="rgb/image_transport" type="string" value="raw"/>
  </node>
</launch>
